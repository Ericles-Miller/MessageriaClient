"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const npm_1 = __importDefault(require("../utils/npm"));
const utils_1 = require("../utils");
const fs_1 = require("../utils/fs");
const constants_1 = require("../utils/constants");
async function ls() {
    let templates = await (0, fs_1.readdir)(constants_1.TEMPLATE_PATH);
    templates = templates.filter((item) => (0, fs_1.isDirectory)((0, path_1.join)(constants_1.TEMPLATE_PATH, item)));
    const tree = templates.length
        ? [
            constants_1.TEMPLATE_PATH,
            ...templates.map((template, index) => {
                const branch = index === templates.length - 1 ? '└── ' : '├── ';
                const version = npm_1.default.readPackageJson((0, path_1.join)(constants_1.TEMPLATE_PATH, template)).version;
                return `${branch}${template}@${version}`;
            })
        ]
        : [constants_1.TEMPLATE_PATH, '└── (empty)'];
    (0, utils_1.output)(tree.join('\n'));
}
exports.default = ls;
